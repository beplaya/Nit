<!DOCTYPE html>
<html lang="en" ng-app="nitForGitTeamApp" xmlns="http://www.w3.org/1999/html">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <link rel="stylesheet"
          href="bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet"
          href="css/main.css">

</head>
<body>

<div ng-controller="socketController">
    <span class="info tiny" ng-class="{errorText: !connected, goodText: connected}">Connected: {{connected}}</span>
    &nbsp;&nbsp;
    <span class="info tiny" ng-class="{errorText: !isLoggedIn, goodText: isLoggedIn}">{{loggedInStatus()}}</span>
</div>
<div>
    <div class="row swimlane" ng-controller="statusController">
        <div class="summary" ng-repeat="C in cardData.data track by $index">
            {{C.key}}
            <span> {{C.status.currentIssueKey}}:&nbsp;&nbsp;{{C.summary}}</span>
            <div class="info author" ng-repeat="A in C.authors track by $index">
                {{A.name}} | {{A.email}}
                <span class="commit" ng-repeat="COM in A.commits track by $index"></span>
            </div>
        </div>
    </div>
    <div class="row swimlane" ng-controller="glimrController">
        <h3 style="margin: 10px;">{{glimrData.currentSprint.name }}
            {{glimrData.currentSprint.formattedStartDate}} -
            {{glimrData.currentSprint.formattedEndDate}}</h3>
        <h4>GLIMR Commit Analysis</h4>
        <div class="col-md-4">
            <table class=" table table-striped glimr-table ">
                <thead>
                <th>Author</th>
                <th>Commits</th>
                </thead>
                <tbody>
                <tr class="" ng-repeat="LA in glimrData.currentSprint.logsAnalysis.authors track by $index">
                    <td style="width:40%;">{{LA.name}}<br>{{LA.email}}</td>
                    <td>
                        <span class="commit" ng-repeat="COM in LA.activity.commits track by $index"></span>
                    </td>
                </tr>
                </tbody>
            </table>
            <div ng-repeat="S in glimrData.allSprints | reverse track by $index ">
                <b>{{ S.name }}</b>
                <br>#Cards: {{S.logsAnalysis.cards.length}}
                    <span class="commit_small" style="background:#FF6922;"
                          ng-repeat="LO in S.logsAnalysis.cards track by $index"></span>
                <br>#Commits: {{ S.logsAnalysis.logObjects.length }}
                    <span class="commit_small" style="background:#8888ff;"
                          ng-repeat="LO in S.logsAnalysis.logObjects track by $index"></span>
                <br>#Authors: {{ S.logsAnalysis.authors.length }}
                    <span class="commit_small" style="background:#0000ff;"
                          ng-repeat="LO in S.logsAnalysis.authors track by $index"></span>
                <br>#Commits Per Card: {{ S.logsAnalysis.logObjects.length / S.logsAnalysis.cards.length }}
                <br>#Rolling Average Hours: {{ S.logsAnalysis.logObjects[0].deltas.rollingAverageMs/60000/60 }}
            </div>
        </div>
        <div class="col-md-6">
            <table class=" table table-striped glimr-table ">
                <thead>
                <th>Issue Key</th>
                <th># of Pull Requests</th>
                <th>Commits</th>
                <th>Authors</th>
                </thead>
                <tbody>
                <tr class="" ng-repeat="LC in glimrData.currentSprint.logsAnalysis.cards track by $index">
                    <td>{{LC.key}}</td>
                    <td>{{LC.numberOfPullRequests}}</td>
                    <td>{{LC.commits.length}}</td>
                    <td>
                        <div ng-repeat="C in LC.commits track by $index">{{C.commit.substring(0,7)}} |
                            {{C.author.email}}
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div id="glimr_graphs" ng-controller="glimrGraphsController">

    </div>
</div>

<script src="bower_components/jquery/dist/jquery.min.js"></script>
<script src="bower_components/angular/angular.min.js"></script>
<script src="bower_components/angular-sanitize/angular-sanitize.min.js"></script>
<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="bower_components/socket.io-client/socket.io.js"></script>
<script src="/bower_components/highcharts/highcharts.js"></script>
<script src="js/main.js"></script>
</body>

</html>
